import { Tutorial, Achievement } from '@/stores/useTutorialStore';
import { useTutorialStore } from '@/stores/useTutorialStore';

export const tutorials: Tutorial[] = [
  {
    id: 'getting-started',
    title: 'Getting Started with TradeFlow 3D',
    description: 'Learn the basics of navigating the trading platform and understanding the interface.',
    category: 'basics',
    steps: [
      {
        id: 'welcome',
        title: 'Welcome to TradeFlow 3D',
        description: 'TradeFlow 3D is an educational trading simulator that visualizes the complete trade lifecycle in 3D. Let\'s get started!',
        target: 'body',
        position: 'top',
      },
      {
        id: 'navigation',
        title: 'Platform Navigation',
        description: 'Use the tabs at the top to switch between Trading, Market Overview, Risk Dashboard, and 3D Visualization.',
        target: '[role="tablist"]',
        position: 'bottom',
      },
      {
        id: 'instrument-selection',
        title: 'Select an Instrument',
        description: 'Click on any instrument in the watchlist to view its details and start trading.',
        target: '[data-tutorial="watchlist"]',
        position: 'right',
      },
      {
        id: 'theme-toggle',
        title: 'Theme Toggle',
        description: 'Toggle between light and dark mode using the theme button in the toolbar.',
        target: '[data-tutorial="theme-toggle"]',
        position: 'bottom',
      },
    ],
  },
  {
    id: 'first-order',
    title: 'Placing Your First Order',
    description: 'Learn how to place different types of orders in the trading system.',
    category: 'trading',
    prerequisites: ['getting-started'],
    steps: [
      {
        id: 'order-entry-panel',
        title: 'Order Entry Panel',
        description: 'This is where you create and submit orders. Let\'s explore the different fields.',
        target: '[data-tutorial="order-entry"]',
        position: 'right',
      },
      {
        id: 'select-side',
        title: 'Buy or Sell',
        description: 'Choose whether you want to BUY or SELL the selected instrument.',
        target: '[data-tutorial="order-side"]',
        position: 'right',
      },
      {
        id: 'order-type',
        title: 'Order Type',
        description: 'Select an order type: MARKET (immediate execution), LIMIT (specific price), STOP, or STOP_LIMIT.',
        target: '[data-tutorial="order-type"]',
        position: 'right',
      },
      {
        id: 'quantity',
        title: 'Enter Quantity',
        description: 'Specify how many shares or units you want to trade.',
        target: '[data-tutorial="quantity"]',
        position: 'right',
      },
      {
        id: 'price',
        title: 'Set Price (Limit Orders)',
        description: 'For LIMIT orders, enter your desired execution price.',
        target: '[data-tutorial="price"]',
        position: 'right',
      },
      {
        id: 'submit-order',
        title: 'Submit Order',
        description: 'Click the submit button to send your order to the matching engine!',
        target: '[data-tutorial="submit-order"]',
        position: 'top',
        action: 'place-order',
      },
    ],
  },
  {
    id: 'market-depth',
    title: 'Understanding Market Depth',
    description: 'Learn how to read the order book and market depth ladder.',
    category: 'analysis',
    prerequisites: ['getting-started'],
    steps: [
      {
        id: 'depth-intro',
        title: 'Market Depth Ladder',
        description: 'The market depth shows all pending buy and sell orders at different price levels.',
        target: '[data-tutorial="market-depth"]',
        position: 'left',
      },
      {
        id: 'bid-side',
        title: 'Bid Side (Buy Orders)',
        description: 'The left side shows BID orders (buyers). Higher prices are at the top.',
        target: '[data-tutorial="bid-side"]',
        position: 'right',
      },
      {
        id: 'ask-side',
        title: 'Ask Side (Sell Orders)',
        description: 'The right side shows ASK orders (sellers). Lower prices are at the top.',
        target: '[data-tutorial="ask-side"]',
        position: 'left',
      },
      {
        id: 'spread',
        title: 'Bid-Ask Spread',
        description: 'The difference between the best bid and best ask is the spread - a key liquidity indicator.',
        target: '[data-tutorial="spread"]',
        position: 'bottom',
      },
    ],
  },
  {
    id: 'order-lifecycle',
    title: 'Order Lifecycle & Blotters',
    description: 'Track your orders from submission to execution using the blotter panels.',
    category: 'trading',
    prerequisites: ['first-order'],
    steps: [
      {
        id: 'order-blotter',
        title: 'Order Blotter',
        description: 'The Order Blotter shows all your orders and their current status (NEW, FILLED, CANCELLED, etc.).',
        target: '[data-tutorial="order-blotter"]',
        position: 'top',
      },
      {
        id: 'trade-blotter',
        title: 'Trade Blotter',
        description: 'Once orders are matched, they appear here as executed trades with fill prices and times.',
        target: '[data-tutorial="trade-blotter"]',
        position: 'top',
      },
      {
        id: 'position-blotter',
        title: 'Position Blotter',
        description: 'Your positions show your current holdings, average price, and real-time P&L.',
        target: '[data-tutorial="position-blotter"]',
        position: 'top',
      },
      {
        id: 'cancel-order',
        title: 'Managing Orders',
        description: 'You can cancel pending orders by clicking the cancel button in the Order Blotter.',
        target: '[data-tutorial="cancel-button"]',
        position: 'left',
      },
    ],
  },
  {
    id: 'risk-monitoring',
    title: 'Risk Management & P&L',
    description: 'Monitor your trading performance and risk exposure.',
    category: 'risk',
    prerequisites: ['order-lifecycle'],
    steps: [
      {
        id: 'risk-dashboard-intro',
        title: 'Risk Dashboard',
        description: 'Switch to the Risk tab to view your overall trading performance and risk metrics.',
        target: '[data-tutorial="risk-tab"]',
        position: 'bottom',
      },
      {
        id: 'pnl-chart',
        title: 'P&L Chart',
        description: 'This chart shows your profit and loss over time. Green means profit, red means loss.',
        target: '[data-tutorial="pnl-chart"]',
        position: 'bottom',
      },
      {
        id: 'exposure',
        title: 'Position Exposure',
        description: 'See your exposure breakdown by instrument and sector.',
        target: '[data-tutorial="exposure"]',
        position: 'top',
      },
      {
        id: 'risk-limits',
        title: 'Risk Limits',
        description: 'Monitor your usage against configured risk limits (max position size, daily loss limit, etc.).',
        target: '[data-tutorial="risk-limits"]',
        position: 'top',
      },
    ],
  },
  {
    id: '3d-visualization',
    title: '3D Trade Flow Visualization',
    description: 'Explore the TRON-like 3D visualization of the complete trade lifecycle.',
    category: 'advanced',
    prerequisites: ['order-lifecycle'],
    steps: [
      {
        id: '3d-intro',
        title: '3D Visualization',
        description: 'Enable the 3D visualization to see your orders flow through the trading infrastructure.',
        target: '[data-tutorial="3d-toggle"]',
        position: 'bottom',
      },
      {
        id: 'order-gateway',
        title: 'Order Gateway',
        description: 'Watch as your orders enter through the gateway (FIX protocol simulation).',
        target: '[data-tutorial="3d-canvas"]',
        position: 'top',
      },
      {
        id: 'matching-engine',
        title: 'Matching Engine',
        description: 'Orders flow to the matching engine where they are processed using price-time priority.',
        target: '[data-tutorial="3d-canvas"]',
        position: 'top',
      },
      {
        id: 'execution',
        title: 'Execution & Settlement',
        description: 'Matched orders execute and flow to the settlement system. Color indicates order side (blue=buy, red=sell).',
        target: '[data-tutorial="3d-canvas"]',
        position: 'top',
      },
    ],
  },
  {
    id: 'market-analysis',
    title: 'Market Analysis Tools',
    description: 'Use the Market Overview to analyze market trends and find trading opportunities.',
    category: 'analysis',
    prerequisites: ['getting-started'],
    steps: [
      {
        id: 'market-overview',
        title: 'Market Overview Tab',
        description: 'The Market Overview provides a comprehensive view of market conditions.',
        target: '[data-tutorial="market-tab"]',
        position: 'bottom',
      },
      {
        id: 'market-movers',
        title: 'Top Movers',
        description: 'See which stocks are moving the most (both gainers and losers).',
        target: '[data-tutorial="top-movers"]',
        position: 'left',
      },
      {
        id: 'sector-performance',
        title: 'Sector Performance',
        description: 'Analyze performance by sector to identify trending industries.',
        target: '[data-tutorial="sector-performance"]',
        position: 'right',
      },
      {
        id: 'watchlist-management',
        title: 'Manage Watchlists',
        description: 'Add instruments to your watchlist to monitor them easily.',
        target: '[data-tutorial="watchlist"]',
        position: 'left',
      },
    ],
  },
];

export const achievements: Achievement[] = [
  {
    id: 'first-steps',
    title: 'First Steps',
    description: 'Complete your first tutorial',
    icon: 'ðŸŽ“',
    category: 'learning',
    condition: () => useTutorialStore.getState().stats.tutorialsCompleted >= 1,
    unlocked: false,
    points: 10,
  },
  {
    id: 'quick-learner',
    title: 'Quick Learner',
    description: 'Complete 3 tutorials',
    icon: 'ðŸ“š',
    category: 'learning',
    condition: () => useTutorialStore.getState().stats.tutorialsCompleted >= 3,
    unlocked: false,
    points: 25,
  },
  {
    id: 'master-student',
    title: 'Master Student',
    description: 'Complete all tutorials',
    icon: 'ðŸŽ–ï¸',
    category: 'learning',
    condition: () => useTutorialStore.getState().stats.tutorialsCompleted >= tutorials.length,
    unlocked: false,
    points: 100,
  },
  {
    id: 'first-trade',
    title: 'First Trade',
    description: 'Place your first order',
    icon: 'ðŸŽ¯',
    category: 'trading',
    condition: () => useTutorialStore.getState().stats.ordersPlaced >= 1,
    unlocked: false,
    points: 15,
  },
  {
    id: 'active-trader',
    title: 'Active Trader',
    description: 'Place 10 orders',
    icon: 'ðŸ“ˆ',
    category: 'trading',
    condition: () => useTutorialStore.getState().stats.ordersPlaced >= 10,
    unlocked: false,
    points: 30,
  },
  {
    id: 'trading-veteran',
    title: 'Trading Veteran',
    description: 'Place 50 orders',
    icon: 'ðŸ’Ž',
    category: 'trading',
    condition: () => useTutorialStore.getState().stats.ordersPlaced >= 50,
    unlocked: false,
    points: 75,
  },
  {
    id: 'market-maker',
    title: 'Market Maker',
    description: 'Place 100 orders',
    icon: 'ðŸ‘‘',
    category: 'trading',
    condition: () => useTutorialStore.getState().stats.ordersPlaced >= 100,
    unlocked: false,
    points: 150,
  },
  {
    id: 'first-execution',
    title: 'First Execution',
    description: 'Execute your first trade',
    icon: 'âœ¨',
    category: 'trading',
    condition: () => useTutorialStore.getState().stats.tradesExecuted >= 1,
    unlocked: false,
    points: 20,
  },
  {
    id: 'diversified',
    title: 'Diversified Portfolio',
    description: 'Trade 5 different instruments',
    icon: 'ðŸŒ',
    category: 'trading',
    condition: () => useTutorialStore.getState().stats.instrumentsTraded.size >= 5,
    unlocked: false,
    points: 40,
  },
  {
    id: 'multi-asset',
    title: 'Multi-Asset Trader',
    description: 'Trade 10 different instruments',
    icon: 'ðŸŽ¨',
    category: 'trading',
    condition: () => useTutorialStore.getState().stats.instrumentsTraded.size >= 10,
    unlocked: false,
    points: 60,
  },
  {
    id: 'dedicated',
    title: 'Dedicated Learner',
    description: 'Spend 30 minutes on the platform',
    icon: 'â°',
    category: 'learning',
    condition: () => useTutorialStore.getState().stats.totalSessionTime >= 30,
    unlocked: false,
    points: 25,
  },
  {
    id: 'committed',
    title: 'Committed Trader',
    description: 'Spend 2 hours on the platform',
    icon: 'ðŸ”¥',
    category: 'learning',
    condition: () => useTutorialStore.getState().stats.totalSessionTime >= 120,
    unlocked: false,
    points: 50,
  },
  {
    id: 'risk-aware',
    title: 'Risk Aware',
    description: 'Complete the Risk Management tutorial',
    icon: 'ðŸ›¡ï¸',
    category: 'risk',
    condition: () => useTutorialStore.getState().completedTutorials.includes('risk-monitoring'),
    unlocked: false,
    points: 35,
  },
  {
    id: '3d-explorer',
    title: '3D Explorer',
    description: 'Complete the 3D Visualization tutorial',
    icon: 'ðŸŽ®',
    category: 'mastery',
    condition: () => useTutorialStore.getState().completedTutorials.includes('3d-visualization'),
    unlocked: false,
    points: 45,
  },
  {
    id: 'analyst',
    title: 'Market Analyst',
    description: 'Complete the Market Analysis tutorial',
    icon: 'ðŸ“Š',
    category: 'analysis',
    condition: () => useTutorialStore.getState().completedTutorials.includes('market-analysis'),
    unlocked: false,
    points: 35,
  },
];
